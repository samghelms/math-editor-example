{"version":3,"sources":["webpack:///webpack/bootstrap 94e7154675c13a612621","webpack:///./src/index.js","webpack:///./src/pdftex.js","webpack:///./resources/delta2tex.min.js","webpack:///(webpack)/buildin/module.js"],"names":["delta2tex","require","Formula","Quill","import","FormulaAligned","value","console","log","blotName","className","tagName","register","bindings","math","key","handler","range","context","index","length","quill","insertEmbed","insertText","getLeaf","eq","enter","toolbarOptions","placeholder","theme","modules","keyboard","toolbar","window","getModule","addHandler","customButton","document","querySelector","addEventListener","getSelection","download","filename","text","element","createElement","setAttribute","style","display","body","appendChild","click","removeChild","exportEditor","delta","getContents","tex","parse","pdftex","compile","then","pdf","customButton2","PDFTeX","opt_workerPath","worker","Worker","self","initialized","on_stdout","msg","on_stderr","onmessage","ev","data","JSON","msg_id","onready","done","promises","warn","promise","Promise","chunkSize","undefined","sendCommand","cmd","p","push","postMessage","stringify","determineChunkSize","size","max","min","success","buf","Math","abs","String","fromCharCode","apply","Uint8Array","command","e","createCommand","args","concat","arguments","curry","obj","fn","source_code","compileRaw","binary_pdf","pdf_dataurl","btoa","commands","sendCompile","getPDF","FS_readFile","chain","webpackUniversalModuleDefinition","root","factory","exports","module","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","s","actions","SHIFT","COMBINE","FINAL","CREATE_BLOCK","default","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_i","Symbol","iterator","_s","next","err","Array","isArray","TypeError","_createClass","defineProperties","target","props","descriptor","writable","Constructor","protoProps","staticProps","_toConsumableArray","arr2","from","_classCallCheck","instance","Formatter","fnList","el","argss","fns","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_el","fmtrArgs","_fmtrArgs","fmtr","return","merge","otherFmtr","entries","add","formatInline","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","keys","_step2","_fns$name","formatBlock","pos","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","_fns$name2","subtract","filtered","filter","_el2","k","v","newFmtr","codeBlockFormatter","scriptFormatter","Error","headerFormatter","extractVals","val","formatters","formula","codeBlock","_extractVals","_extractVals2","script","_extractVals3","_extractVals4","header","_extractVals5","_extractVals6","formatter","newlineFormatters","_defaultSpaceProvider","newlineNumber","x","join","getSpaceFormatting","keysFiltered","_transitionParser","_transitionParser2","_interopRequireDefault","_preprocessor","_headers","deltaCleaned","flatMap","parserPrep","parsed","_parsed$","label","footer","_grammar","_transitionTable","_actions","_actions2","oracle","state","q","END","_state$q","topType","_state$q2","prevType","grammar","apply_t","transition","transitionTable","parser","newlineCt","finalFlag","grammarObj","block","newline","insert","attributes_block","attributes_inline","endfile","label1","label2","inner","_extends","assign","source","_formatter","_defineProperty","concatObj","atomNext","atomTop","nxtFmtr","topFmtr","startFmtr","endFmtr","blockLabels","sep","nextType","combine","_state$q$pop","pop","_state$q$pop2","_state$q$pop3","_state$q$pop4","combined","shift","newAtom","end","_state$q$pop5","_state$q$pop6","lastType","lastAtom","_state$q$pop7","_state$q$pop8","finalText","_typeof","constructor","_mappings","lambda","map","handleNewLines","split","ret","slice","processAtom","includes","_Object$entries$","objKey","objVal","_Object$keys","_Object$keys2","inner_key","_","mappings","mapping","list","webpackPolyfill","deprecate","paths","children"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 94e7154675c13a612621","import PDFTeX from './pdftex'\n\nlet delta2tex = require(\"../resources/delta2tex.min.js\")\nlet Formula = Quill.import('formats/formula');\n\nclass FormulaAligned extends Formula { \n\n  preprocessor(value) {\n    console.log(\"\\\\begin{aligned}\"+value+\"\\\\end{aligned}\")\n    return \"\\\\begin{aligned}\"+value+\"\\\\end{aligned}\";\n  }\n}\nFormulaAligned.blotName = 'formula-aligned';\nFormulaAligned.className = 'ql-formula-aligned';\nFormulaAligned.tagName = 'SPAN';\n\nQuill.register('formats/formula-aligned', FormulaAligned, true);\n\nvar bindings = {\n\n  // There is no default binding named 'custom'\n  // so this will be added without overwriting anything\n  math: {\n    key: 192,\n    handler: function(range, context) {\n      // console.log(\"math\")\n      let index = range.index + range.length;\n      let value = \"\\u0020\"\n\n      quill.insertEmbed(index, \"formula\", value, \"user\");\n      quill.insertText(index+1, \" \", \"user\");\n\n      let [eq, ]= quill.getLeaf(index+1);\n      eq.enter([index, \"initial\"]);\n    }\n  }\n};\n\nvar toolbarOptions = [\n  ['bold', 'italic', 'underline', 'strike', 'link'],        // toggled buttons\n  ['blockquote', 'code-block'],\n  ['video', 'formula', 'image'],\n  [{ 'header': 1 }, { 'header': 2 }],               // custom button values\n  [{ 'list': 'ordered'}, { 'list': 'bullet' }],\n  [{ 'script': 'sub'}, { 'script': 'super' }],      // superscript/subscript\n  [{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent\n  [{ 'direction': 'rtl' }],                         // text direction\n\n  [{ 'size': ['small', false, 'large', 'huge'] }],  // custom dropdown\n  [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\n\n  [{ 'font': [] }],\n  [{ 'align': [] }],\n\n  ['clean'],\n  ['mathblock'],\n\n  ['export']                                         // remove formatting button\n];\n\nvar quill = new Quill('#snow-container', {\n    placeholder: 'Compose an epic...',\n    theme: 'snow',\n    modules: {\n      keyboard: {\n        bindings: bindings\n      },\n      toolbar: toolbarOptions\n    }\n});\n\nwindow.quill = quill\n\nvar toolbar = quill.getModule('toolbar');\ntoolbar.addHandler('mathblock', ()=>console.log(\"toolbar\"));\nvar customButton = document.querySelector('.ql-mathblock');\n\ncustomButton.addEventListener('click', function() {\n      let range = quill.getSelection(true);\n      // for some reason, insert embed doesn't like empty strings\n      let value = \"\\u0020\"\n      if (range != null) {\n        let index = range.index + range.length;\n        quill.insertEmbed(index, \"formula-aligned\", value, \"user\");\n        quill.insertText(index+1, value, \"user\");\n        let [eq, ]= quill.getLeaf(index+1);\n        eq.enter([index, \"initial\"]);\n      }\n\n});\n\n// function download(filename, text) {\n//     var element = document.createElement('a');\n//     element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n//     element.setAttribute('download', filename);\n\n//     element.style.display = 'none';\n//     document.body.appendChild(element);\n\n//     element.click();\n\n//     document.body.removeChild(element);\n// }\n\nfunction download(filename, text) {\n        var element = document.createElement('a');\n        element.setAttribute('href', text);\n        element.setAttribute('download', filename);\n\n        element.style.display = 'none';\n        document.body.appendChild(element);\n\n        element.click();\n\n        document.body.removeChild(element);\n}\n\nfunction exportEditor() {\n  var delta = quill.getContents();\n  console.log(delta)\n  const tex = delta2tex.parse(delta)\n\n  var pdftex = new PDFTeX(\"pdftex-worker.js\");\n  // var latex_code = \"\" + \n  //   \"\\\\documentclass{article}\" + \n  //   \"\\\\begin{document}\" + \n  //   \"\\\\LaTeX is great!\" + \n  //   \"$E = mc^2$\" + \n  //   \"\\\\end{document}\"; \n\n  pdftex.compile(tex).then(function(pdf) {\n    download(\"example.pdf\", pdf);\n  });\n\n  // download(\"example.tex\", tex)\n}\n\ntoolbar.addHandler('export', ()=> \"test\");\n\nvar customButton2 = document.querySelector('.ql-export');\n\ncustomButton2.addEventListener('click', function() {\n    var delta = quill.getContents();\n    exportEditor()\n\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","const PDFTeX = function(opt_workerPath) {\n  if (!opt_workerPath) {\n    opt_workerPath = 'pdftex-worker.js';\n  }\n  var worker = new Worker(opt_workerPath);\n  var self = this;\n  var initialized = false;\n\n  self.on_stdout = function(msg) {\n    console.log(msg);\n  }\n\n  self.on_stderr = function(msg) {\n    console.log(msg);\n  }\n\n\n  worker.onmessage = function(ev) {\n    var data = JSON.parse(ev.data);\n    var msg_id;\n\n    if(!('command' in data))\n      console.log(\"missing command!\", data);\n    switch(data['command']) {\n      case 'ready':\n        onready.done(true);\n        break;\n      case 'stdout':\n      case 'stderr':\n        self['on_'+data['command']](data['contents']);\n        break;\n      default:\n        //console.debug('< received', data);\n        msg_id = data['msg_id'];\n        if(('msg_id' in data) && (msg_id in promises)) {\n          promises[msg_id].done(data['result']);\n        }\n        else\n          console.warn('Unknown worker message '+msg_id+'!');\n    }\n  }\n\n  var onready = new promise.Promise();\n  var promises = [];\n  var chunkSize = undefined;\n\n  var sendCommand = function(cmd) {\n    var p = new promise.Promise();\n    var msg_id = promises.push(p)-1;\n\n    onready.then(function() {\n      cmd['msg_id'] = msg_id;\n      //console.debug('> sending', cmd);\n      worker.postMessage(JSON.stringify(cmd));\n    });\n\n    return p;\n  };\n\n  var determineChunkSize = function() {\n    var size = 1024;\n    var max = undefined; \n    var min = undefined;\n    var delta = size;\n    var success = true;\n    var buf;\n\n    while(Math.abs(delta) > 100) {\n      if(success) {\n        min = size;\n        if(typeof(max) === 'undefined')\n          delta = size;\n        else\n          delta = (max-size)/2;\n      }\n      else {\n        max = size;\n        if(typeof(min) === 'undefined')\n          delta = -1*size/2;\n        else\n          delta = -1*(size-min)/2;\n      }\n      size += delta;\n\n      success = true;\n      try {\n        buf = String.fromCharCode.apply(null, new Uint8Array(size));\n        sendCommand({\n          command: 'test',\n          data: buf,\n        });\n      }\n      catch(e) {\n        success = false;\n      }\n    }\n\n    return size;\n  };\n\n\n  var createCommand = function(command) {\n    self[command] = function() {\n      var args = [].concat.apply([], arguments);\n\n      return sendCommand({\n        'command':  command,\n        'arguments': args,\n      });\n    }\n  }\n  createCommand('FS_createDataFile'); // parentPath, filename, data, canRead, canWrite\n  createCommand('FS_readFile'); // filename\n  createCommand('FS_unlink'); // filename\n  createCommand('FS_createFolder'); // parent, name, canRead, canWrite\n  createCommand('FS_createPath'); // parent, name, canRead, canWrite\n  createCommand('FS_createLazyFile'); // parent, name, canRead, canWrite\n  createCommand('FS_createLazyFilesFromList'); // parent, list, parent_url, canRead, canWrite\n  createCommand('set_TOTAL_MEMORY'); // size\n\n  var curry = function(obj, fn, args) {\n    return function() {\n      return obj[fn].apply(obj, args);\n    }\n  }\n\n  self.compile = function(source_code) {\n    var p = new promise.Promise();\n\n    self.compileRaw(source_code).then(function(binary_pdf) {\n      if(binary_pdf === false)\n        return p.done(false);\n\n      var pdf_dataurl = 'data:application/pdf;charset=binary;base64,' + window.btoa(binary_pdf);\n\n      return p.done(pdf_dataurl);\n    });\n    return p;\n  }\n\n  self.compileRaw = function(source_code) {\n    if(typeof(chunkSize) === \"undefined\")\n      chunkSize = determineChunkSize();\n\n    var commands;\n    if(initialized)\n      commands = [\n        curry(self, 'FS_unlink', ['/input.tex']),\n      ];\n    else\n      commands = [\n        curry(self, 'FS_createDataFile', ['/', 'input.tex', source_code, true, true]),\n        curry(self, 'FS_createLazyFilesFromList', ['/', 'texlive.lst', './texlive', true, true]),\n      ];\n\n    var sendCompile = function() {\n      initialized = true;\n      return sendCommand({\n        'command': 'run',\n        'arguments': ['-interaction=nonstopmode', '-output-format', 'pdf', 'input.tex'],\n//        'arguments': ['-debug-format', '-output-format', 'pdf', '&latex', 'input.tex'],\n      });\n    };\n\n    var getPDF = function() {\n      console.log(arguments);\n      return self.FS_readFile('/input.pdf');\n    }\n\n    return promise.chain(commands)\n      .then(sendCompile)\n      .then(getPDF);\n  };\n};\n\nexport default PDFTeX\n\n\n// WEBPACK FOOTER //\n// ./src/pdftex.js","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"delta2tex\"] = factory();\n\telse\n\t\troot[\"delta2tex\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar actions = {\n\tSHIFT: \"SHIFT\",\n\tCOMBINE: \"COMBINE\",\n\tFINAL: \"FINAL\",\n\tCREATE_BLOCK: \"CREATE_BLOCK\"\n};\n\nexports.default = actions;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// import {attributeTypes} from './types'\nvar Formatter = exports.Formatter = function () {\n\t/*\n TODO: add a method to make sure identical functions don't get added. This\n method will also allow the ability to check whether or not two sections can be combined \n later on.\n */\n\tfunction Formatter() {\n\t\tvar fnList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [[\"none\", [function (el, argss) {\n\t\t\treturn el;\n\t\t}, \"none\"]]];\n\n\t\t_classCallCheck(this, Formatter);\n\n\t\tthis.fns = {};\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator = fnList[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar el = _step.value;\n\n\t\t\t\tvar _el = _slicedToArray(el, 2),\n\t\t\t\t    name = _el[0],\n\t\t\t\t    fmtrArgs = _el[1];\n\n\t\t\t\tvar _fmtrArgs = _slicedToArray(fmtrArgs, 2),\n\t\t\t\t    fmtr = _fmtrArgs[0],\n\t\t\t\t    args = _fmtrArgs[1];\n\n\t\t\t\tthis.fns[name] = [fmtr, args];\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t_iterator.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_createClass(Formatter, [{\n\t\tkey: \"merge\",\n\t\tvalue: function merge(otherFmtr) {\n\t\t\tvar fns = [].concat(_toConsumableArray(Object.entries(this.fns)), _toConsumableArray(Object.entries(otherFmtr.fns)));\n\t\t\treturn new Formatter(fns);\n\t\t}\n\t}, {\n\t\tkey: \"add\",\n\t\tvalue: function add(fn) {\n\t\t\tthis.fns = [].concat(_toConsumableArray(this.fns), [fn]);\n\t\t}\n\t}, {\n\t\tkey: \"formatInline\",\n\t\tvalue: function formatInline(text) {\n\t\t\tvar _iteratorNormalCompletion2 = true;\n\t\t\tvar _didIteratorError2 = false;\n\t\t\tvar _iteratorError2 = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator2 = Object.keys(this.fns)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\t\tvar name = _step2.value;\n\n\t\t\t\t\tvar _fns$name = _slicedToArray(this.fns[name], 2),\n\t\t\t\t\t    fn = _fns$name[0],\n\t\t\t\t\t    args = _fns$name[1];\n\n\t\t\t\t\ttext = fn(text, args);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError2 = true;\n\t\t\t\t_iteratorError2 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t\t_iterator2.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn text;\n\t\t}\n\t}, {\n\t\tkey: \"formatBlock\",\n\t\tvalue: function formatBlock(text, pos) {\n\t\t\tvar _iteratorNormalCompletion3 = true;\n\t\t\tvar _didIteratorError3 = false;\n\t\t\tvar _iteratorError3 = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator3 = Object.keys(this.fns)[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t\t\t\t\tvar name = _step3.value;\n\n\t\t\t\t\tvar _fns$name2 = _slicedToArray(this.fns[name], 2),\n\t\t\t\t\t    fn = _fns$name2[0],\n\t\t\t\t\t    args = _fns$name2[1];\n\n\t\t\t\t\ttext = fn(text, args, pos);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError3 = true;\n\t\t\t\t_iteratorError3 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t\t\t\t\t\t_iterator3.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError3) {\n\t\t\t\t\t\tthrow _iteratorError3;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn text;\n\t\t}\n\t}, {\n\t\tkey: \"subtract\",\n\t\tvalue: function subtract(otherFmtr) {\n\t\t\t/*\n   Takes formatters in the other formatter out of this one.\n   */\n\t\t\tvar filtered = Object.entries(this.fns).filter(function (el) {\n\t\t\t\tvar _el2 = _slicedToArray(el, 2),\n\t\t\t\t    k = _el2[0],\n\t\t\t\t    v = _el2[1];\n\n\t\t\t\treturn !otherFmtr.fns.hasOwnProperty(k);\n\t\t\t});\n\t\t\tvar newFmtr = new Formatter(filtered);\n\t\t\treturn newFmtr;\n\t\t}\n\t}]);\n\n\treturn Formatter;\n}();\n\nvar codeBlockFormatter = function codeBlockFormatter(text, args, pos) {\n\tconsole.log(\"code block\");\n\tif (pos === \"start\") {\n\t\tconsole.log(\"start called\");\n\t\treturn \"\\\\begin{lstlisting}\\n\" + text;\n\t} else {\n\t\treturn text + \" \\n\\\\end{lstlisting}\";\n\t}\n};\n\nvar scriptFormatter = function scriptFormatter(text, args) {\n\tif (args === \"super\") {\n\t\treturn \"\\\\textsuperscript{\" + text + \"}\";\n\t} else if (args === \"sub\") {\n\t\treturn \"\\\\textsubscript{\" + text + \"}\";\n\t} else {\n\t\tthrow new Error(\"unknown argument \" + args + \" to scriptFormatter\");\n\t}\n};\n\nvar headerFormatter = function headerFormatter(text, args) {\n\treturn \"HEADER\" + text + \"HEADER\";\n};\n\nvar extractVals = function extractVals(val) {\n\tvar entries = Object.entries(val);\n\tif (entries.length !== 1) {\n\t\tthrow new Error(\"invalid val passed to Formatter\");\n\t}\n\treturn entries[0];\n};\n\nvar formatters = {\n\tformula: function formula(value) {\n\t\treturn \"$$ \" + value + \" $$\";\n\t},\n\t'code-block': function codeBlock(value) {\n\t\tvar _extractVals = extractVals(value),\n\t\t    _extractVals2 = _slicedToArray(_extractVals, 2),\n\t\t    name = _extractVals2[0],\n\t\t    args = _extractVals2[1];\n\n\t\treturn new Formatter([[name, [codeBlockFormatter, args]]]);\n\t},\n\tscript: function script(value) {\n\t\tvar _extractVals3 = extractVals(value),\n\t\t    _extractVals4 = _slicedToArray(_extractVals3, 2),\n\t\t    name = _extractVals4[0],\n\t\t    args = _extractVals4[1];\n\n\t\treturn new Formatter([[name, [scriptFormatter, args]]]);\n\t},\n\theader: function header(value) {\n\t\tvar _extractVals5 = extractVals(value),\n\t\t    _extractVals6 = _slicedToArray(_extractVals5, 2),\n\t\t    name = _extractVals6[0],\n\t\t    args = _extractVals6[1];\n\n\t\treturn new Formatter([[name, [headerFormatter, args]]]);\n\t}\n\n};\n\nvar formatter = exports.formatter = function formatter(key) {\n\tif (formatters.hasOwnProperty(key)) {\n\t\treturn formatters[key];\n\t} else {\n\t\tthrow \"cannot format type \" + key;\n\t}\n};\n\nvar newlineFormatters = {\n\t/*\n Define special rules for spacing within blocks here\n */\n\t'_default-space-provider': function _defaultSpaceProvider(newlineNumber) {\n\t\treturn \"\\n\\\\vspace{\" + newlineNumber + \"mm}\\n\";\n\t},\n\t'code-block': function codeBlock(newlineNumber) {\n\t\treturn Array.from({ length: newlineNumber }, function (x, i) {\n\t\t\treturn \"\\n\";\n\t\t}).join(\"\");\n\t}\n\n};\n\nvar getSpaceFormatting = exports.getSpaceFormatting = function getSpaceFormatting(keys) {\n\t/*\n TODO: update this for nested space formatters (probably not going to be an issue)\n */\n\tvar key = void 0;\n\tvar keysFiltered = keys.filter(function (k) {\n\t\treturn newlineFormatters.hasOwnProperty(k);\n\t});\n\tif (keysFiltered.length > 1) {\n\t\tthrow new Error(\"error, have not implemented nested space formatters for getSpaceFormatting() yet\");\n\t} else if (keysFiltered.length === 1) {\n\t\tkey = keys[0];\n\t} else {\n\t\tkey = \"_default-space-provider\";\n\t}\n\tif (newlineFormatters.hasOwnProperty(key)) {\n\t\treturn newlineFormatters[key];\n\t} else {\n\t\tthrow new Error(\"error, with getSpaceFormatting(), check newlineFormatters and program logic\");\n\t}\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _transitionParser = __webpack_require__(3);\n\nvar _transitionParser2 = _interopRequireDefault(_transitionParser);\n\nvar _preprocessor = __webpack_require__(6);\n\nvar _headers = __webpack_require__(8);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar parse = function parse(delta) {\n\tvar deltaCleaned = delta[\"ops\"].flatMap(function (el) {\n\t\treturn Object.entries(el).flatMap(_preprocessor.parserPrep);\n\t});\n\tdeltaCleaned.push([\"endfile\", \"\"]);\n\tvar parsed = (0, _transitionParser2.default)(deltaCleaned);\n\n\tvar _parsed$ = _slicedToArray(parsed[0], 2),\n\t    label = _parsed$[0],\n\t    text = _parsed$[1];\n\n\treturn _headers.header.data + text + _headers.footer.data;\n};\n\nmodule.exports = {\n\tparse: parse\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _grammar = __webpack_require__(4);\n\nvar _transitionTable = __webpack_require__(5);\n\nvar _actions = __webpack_require__(0);\n\nvar _actions2 = _interopRequireDefault(_actions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar oracle = function oracle(state) {\n\t/*\n Returns the correct action to take\n */\n\n\tif (state.q.length < 2) {\n\t\tif (state.delta.length < 1) {\n\t\t\treturn _actions2.default.END;\n\t\t}\n\t\treturn _actions2.default.SHIFT;\n\t}\n\n\tvar _state$q = _slicedToArray(state.q[state.q.length - 1], 1),\n\t    topType = _state$q[0];\n\n\tvar _state$q2 = _slicedToArray(state.q[state.q.length - 2], 1),\n\t    prevType = _state$q2[0];\n\n\t// if (state.delta.length < 1) {\n\t// \tif (topType === \"block\" && prevType === \"block\") {\n\t// \t\treturn actions.END\n\t// \t}\n\t// }\n\n\treturn (0, _grammar.grammar)(prevType, topType);\n};\n\nvar apply_t = function apply_t(state, transition) {\n\t/*\n Returns the correct action to take\n */\n\n\treturn _transitionTable.transitionTable[transition](state);\n};\n\nvar parser = function parser(delta) {\n\t// TODO: find a more elegent way of dealing with the root\n\tvar state = { q: [[\"block\", { text: '', newlineCt: 0 }]], delta: delta, finalFlag: false };\n\tvar transition = void 0;\n\tvar i = 0;\n\twhile (!state.finalFlag) {\n\t\ttransition = oracle(state);\n\t\tstate = apply_t(state, transition);\n\t}\n\n\treturn state[\"q\"];\n};\n\nexports.default = parser;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.grammar = undefined;\n\nvar _actions = __webpack_require__(0);\n\nvar _actions2 = _interopRequireDefault(_actions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar grammarObj = {\n\tblock: {\n\t\tblock: _actions2.default.COMBINE,\n\t\tnewline: _actions2.default.COMBINE,\n\t\tinsert: _actions2.default.SHIFT,\n\t\tattributes_block: _actions2.default.COMBINE,\n\t\tattributes_inline: _actions2.default.COMBINE,\n\t\tendfile: _actions2.default.END\n\t},\n\tinsert: {\n\t\tinsert: _actions2.default.COMBINE,\n\t\tattributes_block: _actions2.default.COMBINE,\n\t\tnewline: _actions2.default.COMBINE,\n\t\tendfile: _actions2.default.COMBINE,\n\t\tattributes_inline: _actions2.default.COMBINE\n\t},\n\tattributes_inline: {\n\t\tinsert: _actions2.default.COMBINE,\n\t\tattributes_inline: _actions2.default.COMBINE\n\t}\n\n};\n\nvar grammar = exports.grammar = function grammar(label1, label2) {\n\tif (grammarObj.hasOwnProperty(label1)) {\n\t\tvar inner = grammarObj[label1];\n\t\tif (inner.hasOwnProperty(label2)) {\n\t\t\treturn grammarObj[label1][label2];\n\t\t}\n\t}\n\tthrow new Error(\"sequence [\" + label1 + \", \" + label2 + \"] not in grammar\");\n\treturn null;\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.transitionTable = undefined;\n\nvar _transitionTable;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _actions = __webpack_require__(0);\n\nvar _actions2 = _interopRequireDefault(_actions);\n\nvar _formatter = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar concatObj = {\n\tinsert: {\n\t\tinsert: function insert(atomNext, atomTop) {\n\t\t\treturn [\"insert\", atomNext + atomTop];\n\t\t},\n\t\tnewline: function newline(atomNext, atomTop) {\n\t\t\treturn [\"block\", { text: atomNext, newlineCt: 1 }];\n\t\t},\n\t\tattributes_block: function attributes_block(atomNext, atomTop) {\n\t\t\treturn [\"block\", { text: atomNext, formatters: atomTop, newlineCt: 0 }];\n\t\t},\n\t\tendfile: function endfile(atomNext, atomTop) {\n\t\t\treturn [\"block\", { text: atomNext, newlineCt: 0 }];\n\t\t},\n\t\tattributes_inline: function attributes_inline(atomNext, atomTop) {\n\t\t\treturn [\"insert\", atomTop.formatInline(atomNext)];\n\t\t}\n\t},\n\tblock: {\n\t\tnewline: function newline(atomNext, atomTop) {\n\t\t\treturn [\"block\", _extends({}, atomNext, { newlineCt: atomNext.newlineCt + 1 })];\n\t\t},\n\t\tattributes_block: function attributes_block(atomNext, atomTop) {\n\t\t\treturn [\"block\", _extends({}, atomNext, { text: atomNext.text, formatters: atomNext.formatters.merge(atomTop) })];\n\t\t},\n\t\tattributes_inline: function attributes_inline(atomNext, atomTop) {\n\t\t\treturn [\"block\", atomTop.formatInline(atomNext)];\n\t\t},\n\t\tblock: function block(atomNext, atomTop) {\n\t\t\tvar nxtFmtr = atomNext.formatters ? atomNext.formatters : new _formatter.Formatter();\n\t\t\tvar topFmtr = atomTop.formatters ? atomTop.formatters : new _formatter.Formatter();\n\t\t\t// topFmtr needs to know if it is inside of something already, and nxtFmtr needs to know whether to end blocks or not\n\t\t\t// if inside of something, don't place a new start (remove the formatter)\n\t\t\tvar startFmtr = topFmtr.subtract(nxtFmtr);\n\t\t\t// We don't need to place an end statement if the top is a continutation\n\t\t\tvar endFmtr = nxtFmtr.subtract(topFmtr);\n\n\t\t\tvar blockLabels = Object.keys(topFmtr.fns).filter(function (k) {\n\t\t\t\treturn nxtFmtr.fns.hasOwnProperty(k);\n\t\t\t});\n\t\t\tvar sep = (0, _formatter.getSpaceFormatting)(blockLabels)(atomNext.newlineCt);\n\n\t\t\tvar text = endFmtr.formatBlock(atomNext.text, \"end\") + sep + startFmtr.formatBlock(atomTop.text, \"start\");\n\n\t\t\treturn [\"block\", { text: text, formatters: topFmtr, newlineCt: atomTop.newlineCt }];\n\t\t}\n\t},\n\n\tattributes_inline: {\n\t\tattributes_inline: function attributes_inline(atomNext, atomTop) {\n\t\t\treturn [\"attributes_inline\", atomNext.merge(atomTop)];\n\t\t},\n\t\tinsert: function insert(atomNext, atomTop) {\n\t\t\treturn [\"insert\", atomNext.formatInline(atomTop)];\n\t\t}\n\t}\n};\n\nvar concat = function concat(nextType, topType) {\n\tif (concatObj.hasOwnProperty(nextType)) {\n\t\tvar inner = concatObj[nextType];\n\t\tif (inner.hasOwnProperty(topType)) {\n\t\t\treturn concatObj[nextType][topType];\n\t\t}\n\t}\n\tthrow new Error(\"sequence [\" + nextType + \", \" + topType + \"] not in concat rules\");\n\treturn null;\n};\n\nvar combine = function combine(state) {\n\tvar _state$q$pop = state.q.pop(),\n\t    _state$q$pop2 = _slicedToArray(_state$q$pop, 2),\n\t    topType = _state$q$pop2[0],\n\t    atomTop = _state$q$pop2[1];\n\n\tvar _state$q$pop3 = state.q.pop(),\n\t    _state$q$pop4 = _slicedToArray(_state$q$pop3, 2),\n\t    nextType = _state$q$pop4[0],\n\t    atomNext = _state$q$pop4[1];\n\n\tvar combined = concat(nextType, topType)(atomNext, atomTop);\n\tstate.q.push(combined);\n\treturn _extends({}, state);\n};\n\nvar shift = function shift(state) {\n\tvar newAtom = state.delta.shift();\n\tstate.q.push(newAtom);\n\treturn _extends({}, state);\n};\n\nvar end = function end(state) {\n\tvar _state$q$pop5 = state.q.pop(),\n\t    _state$q$pop6 = _slicedToArray(_state$q$pop5, 2),\n\t    lastType = _state$q$pop6[0],\n\t    lastAtom = _state$q$pop6[1];\n\n\tif (lastType === \"endfile\") {\n\t\tvar _state$q$pop7 = state.q.pop();\n\n\t\tvar _state$q$pop8 = _slicedToArray(_state$q$pop7, 2);\n\n\t\tlastType = _state$q$pop8[0];\n\t\tlastAtom = _state$q$pop8[1];\n\t}\n\tif (lastType !== \"block\") {\n\t\tthrow new Error(\"last type should be block, incorrect parsing\");\n\t}\n\n\tvar endFmtr = lastAtom.formatters ? lastAtom.formatters : new _formatter.Formatter();\n\tvar finalText = endFmtr.formatBlock(lastAtom.text, \"end\");\n\tstate.q.push([\"final\", finalText]);\n\n\tstate.finalFlag = true;\n\treturn _extends({}, state);\n};\n\nvar transitionTable = exports.transitionTable = (_transitionTable = {}, _defineProperty(_transitionTable, _actions2.default.COMBINE, combine), _defineProperty(_transitionTable, _actions2.default.SHIFT, shift), _defineProperty(_transitionTable, _actions2.default.END, end), _transitionTable);\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.parserPrep = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _formatter = __webpack_require__(1);\n\nvar _mappings = __webpack_require__(7);\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nArray.prototype.flatMap = function (lambda) {\n\treturn Array.prototype.concat.apply([], this.map(lambda));\n};\n\nvar handleNewLines = function handleNewLines(split) {\n\tvar ret = [];\n\tvar _iteratorNormalCompletion = true;\n\tvar _didIteratorError = false;\n\tvar _iteratorError = undefined;\n\n\ttry {\n\t\tfor (var _iterator = split.slice(0, split.length - 1)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\tvar s = _step.value;\n\n\t\t\tif (s !== \"\") {\n\t\t\t\tret.push([\"insert\", s]);\n\t\t\t}\n\t\t\tret.push([\"newline\", \"\"]);\n\t\t}\n\t} catch (err) {\n\t\t_didIteratorError = true;\n\t\t_iteratorError = err;\n\t} finally {\n\t\ttry {\n\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t_iterator.return();\n\t\t\t}\n\t\t} finally {\n\t\t\tif (_didIteratorError) {\n\t\t\t\tthrow _iteratorError;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (split[split.length - 1] !== \"\") {\n\t\tret.push([\"insert\", split[split.length - 1]]);\n\t}\n\treturn ret;\n};\n\nvar processAtom = function processAtom(key, val) {\n\tif (key === \"insert\") {\n\t\tif (typeof val === \"string\") {\n\t\t\tif (val.includes(\"\\n\")) {\n\t\t\t\tvar split = val.split(/\\n/g);\n\t\t\t\treturn handleNewLines(split);\n\t\t\t} else {\n\t\t\t\treturn [[key, val]];\n\t\t\t}\n\t\t} else if ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) === \"object\") {\n\t\t\tif (Object.entries(val).length !== 1) {\n\t\t\t\tthrow new Error(\"cannot handle insert type \"); // TODO: state insert type\n\t\t\t}\n\n\t\t\tvar _Object$entries$ = _slicedToArray(Object.entries(val)[0], 2),\n\t\t\t    objKey = _Object$entries$[0],\n\t\t\t    objVal = _Object$entries$[1];\n\n\t\t\treturn [[key, (0, _formatter.formatter)(objKey)(objVal)]];\n\t\t}\n\t} else if (key === \"attributes\" && (typeof val === 'undefined' ? 'undefined' : _typeof(val)) === \"object\") {\n\t\tvar _Object$keys = Object.keys(val),\n\t\t    _Object$keys2 = _slicedToArray(_Object$keys, 2),\n\t\t    inner_key = _Object$keys2[0],\n\t\t    _ = _Object$keys2[1];\n\n\t\treturn [[(0, _mappings.mappings)(inner_key), (0, _formatter.formatter)(inner_key)(val)]];\n\t}\n\n\tthrow new Error(\"unkown type of atom\");\n};\n\nvar parserPrep = exports.parserPrep = function parserPrep(el) {\n\tel = processAtom.apply(undefined, _toConsumableArray(el));\n\treturn el;\n};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n\nvar mapping = {\n\t\"code-block\": \"attributes_block\",\n\tlist: \"attributes_block\"\n};\n\nvar mappings = exports.mappings = function mappings(label) {\n\tif (mapping.hasOwnProperty(label)) {\n\t\treturn mapping[label];\n\t} else {\n\t\treturn \"attributes_inline\";\n\t}\n};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar footer = exports.footer = { data: \"\\n\\\\end{document}\" };\nvar header = exports.header = {\n  data: \"\\\\documentclass[12pt]{article}\\n\\\\usepackage[margin=1in]{geometry} \\n\\\\usepackage{amsmath,amsthm,amssymb,amsfonts}\\n\\\\usepackage{listings}\\n%If you want to title your bold things something different just make another thing exactly like this but replace \\\"problem\\\" with the name of the thing you want, like theorem or lemma or whatever\\n \\n\\\\begin{document}\\n\"\n\n};\n\n/***/ })\n/******/ ]);\n});\n//# sourceMappingURL=delta2tex.min.js.map\n\n\n// WEBPACK FOOTER //\n// ./resources/delta2tex.min.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/module.js"],"sourceRoot":""}